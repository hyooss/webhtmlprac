<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>home</title>
    <style>
        h1 {
            font-style: italic;
            font-weight: bold;
            color: black;
            background-color: red;
            width: 1000px;
        }

        div {
            width: 1000px;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 10px;
        }

        .selected {
            background-color: cornflowerblue;
            color: white;
        }
    </style>
</head>
<body>
<h1>HOME</h1>
<p>이곳은 홈화면입니다</p>
<div id="buttonContainer">
    <!-- 버튼 1~100 생성됨 -->
</div>
<p>선택된 버튼: <span id="selectedDisplay"></span></p>
<p>기록: <span id="histories"></span></p>
<p>
    <button id="backBtn">&larr;</button>
    <button id="forwardBtn">&rarr;</button>
</p>

<script>
    const buttonContainer = document.getElementById("buttonContainer");
    const selectedDisplay = document.getElementById("selectedDisplay");
    const hist = document.getElementById("histories");
    const backBtn = document.getElementById("backBtn");
    const forwardBtn = document.getElementById("forwardBtn");

    let historyList = [];
    let currentIndex = -1;
    let selectedButton = null;

    function applySelection(num) {
        if (selectedButton) {
            selectedButton.classList.remove("selected");
        }

        const target = [...document.querySelectorAll("button")].find(
            btn => parseInt(btn.textContent) === num
        );
        if (!target) return;

        target.classList.add("selected");
        selectedButton = target;
        selectedDisplay.textContent = num;

        const newUrl = `${window.location.pathname}?btn=${num}`;
        history.replaceState(null, "", newUrl);

        updateHistory();
    }

    function updateHistory() {
        const shown = historyList
            .slice(0, currentIndex + 1)  // 현재 위치까지만 잘라서
            .map((num, idx) => idx === currentIndex ? `[${num}]` : `${num}`)
            .join(" → ");
        hist.textContent = shown;
    }

    function handleClick(num) {
        if (currentIndex < historyList.length - 1) {
            historyList = historyList.slice(0, currentIndex + 1);
        }
        historyList.push(num);
        currentIndex++;
        applySelection(num);
    }

    function goBack() {
        if (currentIndex > 0) {
            currentIndex--;
            applySelection(historyList[currentIndex]);
        }
    }

    function goForward() {
        if (currentIndex < historyList.length - 1) {
            currentIndex++;
            applySelection(historyList[currentIndex]);
        }
    }

    // 버튼 생성 및 이벤트 등록 (1~100)
    for (let i = 1; i <= 100; i++) {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.textContent = i;
        btn.addEventListener("click", () => handleClick(i));
        buttonContainer.appendChild(btn);
    }

    backBtn.addEventListener("click", goBack);
    forwardBtn.addEventListener("click", goForward);
</script>
</body>
</html>